(this["webpackJsonpreels-app"]=this["webpackJsonpreels-app"]||[]).push([[0],{34:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(27),s=n.n(a),o=(n(34),n(17));n(35),n(47),n(48);o.a.initializeApp({apiKey:"AIzaSyDrEXVuKV-fvM--ULatELX9EVJZ5uWnYSE",authDomain:"reels-app-cc387.firebaseapp.com",projectId:"reels-app-cc387",storageBucket:"reels-app-cc387.appspot.com",messagingSenderId:"109908015394",appId:"1:109908015394:web:c16eed00f3819ffbe38d7b"});var r=new o.a.auth.GoogleAuthProvider,i=o.a.auth(),l=o.a.firestore(),u=o.a.storage(),d=(o.a,n(15)),j=n.n(d),p=n(19),b=n(13),m=n(3),h=Object(c.createContext)(),O=function(e){var t=Object(c.useState)(null),n=Object(b.a)(t,2),a=n[0],s=n[1],o=Object(c.useState)(!0),r=Object(b.a)(o,2),u=r[0],d=r[1];return Object(c.useEffect)((function(){var e=i.onAuthStateChanged(function(){var e=Object(p.a)(j.a.mark((function e(t){var n,c,a,o,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=10;break}return n=t.displayName,c=t.email,a=t.uid,o=t.photoURL,r=l.collection("user").doc(a),e.next=5,r.get();case 5:0==e.sent.exists&&r.set({displayName:n,email:c,photoURL:o}),s({displayName:n,email:c,uid:a,photoURL:o}),e.next=11;break;case 10:s(null);case 11:d(!1);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return function(){e()}}),[]),Object(m.jsx)(h.Provider,{value:a,children:!u&&e.children})},f=n(5),x=function(){var e=Object(c.useContext)(h);return Object(m.jsxs)("div",{children:[e?Object(m.jsx)(f.a,{to:"/"}):"",Object(m.jsx)("button",{type:"button",class:"btn btn-primary mt-0 p-3",onClick:function(){i.signInWithPopup(r)},children:"Login With Google"})]})},g=n(29),v=(n(44),n(45),function(e){var t=Object(c.useContext)(h),n=Object(c.useState)(!1),a=Object(b.a)(n,2),s=a[0],o=(a[1],Object(c.useState)(!1)),r=Object(b.a)(o,2),i=r[0],u=r[1],d=Object(c.useState)(""),O=Object(b.a)(d,2),f=O[0],x=O[1],g=Object(c.useState)([]),v=Object(b.a)(g,2),y=v[0],k=v[1];return Object(c.useEffect)((function(){(function(){var t=Object(p.a)(j.a.mark((function t(){var n,c,a,s;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.data.comments,c=[],a=0;case 3:if(!(a<n.length)){t.next=11;break}return t.next=6,l.collection("comments").doc(n[a]).get();case 6:s=t.sent,c.push(s.data());case 8:a++,t.next=3;break;case 11:console.log(c),k(c);case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e]),Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:"video-card",children:[Object(m.jsx)("p",{children:e.data.name}),Object(m.jsx)("span",{className:"music-player",children:Object(m.jsxs)("marquee",{children:[Object(m.jsx)("span",{class:"material-icons-outlined",children:"music_note"}),"Song is being tested"]})}),Object(m.jsx)("span",{class:"material-icons-outlined chat-icon",onClick:function(){u(!i)},children:"chat"}),Object(m.jsx)("span",{class:"material-icons-outlined like-icon",children:"favorite_border"}),i?Object(m.jsxs)("div",{className:"comment-box",children:[Object(m.jsxs)("div",{className:"actual-comment",children:[console.log(y),y.map((function(e){return Object(m.jsxs)("div",{className:"image-user",children:[Object(m.jsx)("img",{src:e.photo}),Object(m.jsxs)("h2",{children:[" ",e.name," "]}),Object(m.jsx)("p",{children:e.comment})]})}))]}),Object(m.jsxs)("div",{className:"comment-form",children:[Object(m.jsx)("input",{type:"text",value:f,onChange:function(e){x(e.currentTarget.value)}}),Object(m.jsx)("button",{onClick:Object(p.a)(j.a.mark((function n(){var c,a,s,o;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.collection("comments").add({name:t.displayName,comment:f,photo:t.photoURL});case 2:return c=n.sent,x(""),a=c.id,n.next=7,l.collection("posts").doc(e.data.id).get();case 7:return s=n.sent,(o=s.data().comments).push(a),n.next=12,l.collection("posts").doc(e.data.id).update({comments:o});case 12:case"end":return n.stop()}}),n)}))),children:"Post"})]})]}):"",Object(m.jsx)("video",{className:"video-tag",src:e.data.url,onClick:function(e){s?(e.currentTarget.pause(),s=!1):(e.currentTarget.play(),s=!0)}})]})})}),y=function(){var e=Object(c.useContext)(h),t=Object(c.useState)([]),n=Object(b.a)(t,2),a=n[0],s=n[1];return Object(c.useEffect)((function(){var e=l.collection("posts").onSnapshot((function(e){for(var t=e.docs,n=[],c=0;c<t.length;c++)n.push(Object(g.a)({id:t[c].id},t[c].data()));s(n)}));return function(){e()}}),[]),Object(m.jsxs)(m.Fragment,{children:[e?"":Object(m.jsx)(f.a,{to:"/login"}),Object(m.jsx)("div",{className:"video-container",children:a.map((function(e){return Object(m.jsx)(v,{data:e},e.id)}))}),Object(m.jsx)("button",{className:"logout-btn",onClick:function(){i.signOut()},children:"Logout"}),Object(m.jsx)("input",{type:"file",onChange:function(t){var n=t.currentTarget.files[0],c=n.name,a=n.size,s=n.type;if((a/=1e6)>10)alert("please upload file less than 10 MB");else if("video"==(s=s.split("/")[0])){var o=u.ref("/posts/".concat(e.uid,"/").concat(Date.now()+"-"+c)).put(n);o.on("state_changed",null,null,(function(){o.snapshot.ref.getDownloadURL().then((function(t){console.log(t),l.collection("posts").add({name:e.displayName,url:t,likes:[],comments:[]})}))}))}else alert("please upload video only")}})]})},k=n(21),N=function(){return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(O,{children:Object(m.jsx)(k.a,{children:Object(m.jsxs)(f.d,{children:[Object(m.jsx)(f.b,{exact:!0,path:"/",children:Object(m.jsx)(y,{})}),Object(m.jsx)(f.b,{exact:!0,path:"/login",children:Object(m.jsx)(x,{})})]})})})})};s.a.render(Object(m.jsx)(N,{}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.1c5914e5.chunk.js.map